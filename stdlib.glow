extern putchard(char);
extern putchar(double);

# Logical unary not.
def unary!(v) =
  if v then
    0
  else
    1;

# Unary negate.
def unary-(v) =
  0-v;

# Define > with the same precedence as <.
def binary> 10 (LHS, RHS) =
  RHS < LHS;

# Binary logical or, which does not short circuit.
def binary| 13 (LHS, RHS) =
  if LHS then
    1
  else if RHS then
    1
  else
    0;

# Binary logical and, which does not short circuit.
def binary& 6 (LHS, RHS) =
  if !LHS then
    0
  else
    !(!RHS);

# Define = with slightly lower precedence than relationals.
def binary == 9 (LHS, RHS) =
  !(LHS < RHS | LHS > RHS);

# Define ':' for sequencing: as a low-precedence operator that ignores operands
# and just returns the RHS.
def binary : 1 (x, y) =
  y;

def fibo(v) =
  if v == 0 then
    0
  else if v == 1 then
    1
  else
    fibo(v - 1) + fibo(v - 2);

putchar(fibo(5));
